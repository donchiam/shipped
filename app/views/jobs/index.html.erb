<p id="notice"><%= notice %></p>

<h1>Jobs</h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Posted by</th>
      <th>Containers</th>
      <th>Origin</th>
      <th>Destination</th>
      <th>Cost</th>
      <th>Assigned Boat</th>
    </tr>
  </thead>

  <tbody>
    <% @jobs.each do |job| %>
      <tr>
        <td><%= link_to job.name, job_path(job) %></td>
        <td><%= job.user.email %></td>
        <td><%= job.containers %></td>
        <td><%= job.origin %></td>
        <td><%= job.destination %></td>
        <td><%= job.cost %></td>
        <% if job.assignments.any? %>
        <td><%= job.assignments.map{|a| a.boat.name}.join(', ') %></td>
        <% else %>

        
         <%= form_tag add_assignment_path(job), method: :post, remote: true do %>
         <td class ="select_boat"><%= collection_select(:job, :boat_id, Boat.all, :id, :name, { :prompt => 'Select a boat' }) %></td> 
           <td><%= submit_tag 'Save', class: "select_boat" %></td> 

        <% end %>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Job', new_job_path %>

